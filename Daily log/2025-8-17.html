コールバックとは？

関数に渡す関数のこと。

ある処理が終わったら「この関数を呼んでね」と渡す使い方をします。

例：

setTimeout(() => {
console.log("3秒後に実行！");
}, 3000);


ここでは () => { console.log(...) } がコールバック関数。

2. コールバック地獄とは？

非同期処理を順番にたくさん書くときに、コールバックを次々に入れ子にしてしまい、
コードが右にどんどん深くなって読みにくくなる状態のこと。

例：ユーザーを取得 → 投稿を取得 → コメントを取得
getUser(1, (user) => {
getPosts(user.id, (posts) => {
getComments(posts[0].id, (comments) => {
console.log(comments);
});
});
});


👉 ネストが深くて「ピラミッド」みたいに右にズレていく。これがコールバック地獄。

3. なぜ問題？

コードが読みにくい

エラー処理が難しい

処理の順番がわかりづらい

4. 解決方法
🔹 Promise を使う
getUser(1)
.then(user => getPosts(user.id))
.then(posts => getComments(posts[0].id))
.then(comments => console.log(comments))
.catch(err => console.error(err));

🔹 async / await を使う（もっと読みやすい）
async function main() {
try {
const user = await getUser(1);
const posts = await getPosts(user.id);
const comments = await getComments(posts[0].id);
console.log(comments);
} catch (err) {
console.error(err);
}
}

main();